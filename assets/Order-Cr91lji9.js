import{_ as y,S,c as d,a as t,e as h,r as v,w as s,v as r,f as u,F as p,g as k,d as b,o as i,t as f}from"./index-CN63sUZO.js";const x={components:{SideBar:S},data(){return{form:{nama:"",alamat:"",noTelp:"",email:"",paket:"",tanggalSewa:"",tanggalPengembalian:"",lamaSewa:"",metodePembayaran:"Cash",statusPembayaran:"Lunas"},addOnSelection:{},packages:[],items:[],orderList:[]}},created(){this.getPackages(),this.getItems()},methods:{async getPackages(){try{const a=await b.get("http://localhost:40001/packages");this.packages=a.data}catch(a){console.error("Error fetching packages:",a)}},async getItems(){try{const a=await b.get("http://localhost:40001/items");this.items=a.data}catch(a){console.error("Error fetching items:",a)}},addItem(){this.addOnSelection&&this.addOnSelection.qty>0&&(this.orderList.find(e=>e.name===this.addOnSelection.name)?alert("Item sudah ada dalam daftar order"):this.orderList.push({...this.addOnSelection}))},removeItem(a){this.orderList.splice(a,1)},hitungLamaSewa(){if(this.form.tanggalSewa&&this.form.tanggalPengembalian){const a=new Date(this.form.tanggalSewa),e=new Date(this.form.tanggalPengembalian);this.form.lamaSewa=Math.max(Math.ceil((e-a)/(1e3*60*60*24)),0)}},Back(){console.log("Back button clicked")},Order(){const a=this.form.paket?this.form.paket.price:0,e=this.orderList.reduce((m,o)=>m+o.price*o.qty,0),g=(a+e)*this.form.lamaSewa;b.post("http://localhost:40001/invoices",{name:this.form.nama,address:this.form.alamat,phone:this.form.noTelp,email:this.form.email,package:this.form.paket,items:this.orderList,rentalDate:this.form.tanggalSewa,returnDate:this.form.tanggalPengembalian,rentalDuration:this.form.lamaSewa,paymentMethod:this.form.metodePembayaran,paymentStatus:this.form.statusPembayaran,totalPrice:g,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}).then(m=>(console.log("Order successful:",m.data),b.post("http://localhost:40001/income",{name:this.form.nama,phone:this.form.noTelp,itemList:this.form.paket.name?this.form.paket.name:this.orderList.map(o=>o.name).join(", "),description:this.orderList.map(o=>o.name).join(", "),type:this.form.paket.name?"Package":"Item",price:a+e,qty:this.form.lamaSewa,total:g,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}))).catch(m=>{console.error("Error placing order:",m)})}}},P={class:"min-h-screen flex"},O={class:"flex flex-col items-center p-5 bg-gray-100 w-full"},L={class:"bg-white p-8 rounded-xl shadow-lg w-full max-w-3xl border-2 border-[#6d1b23]"},I={class:"grid grid-cols-2 gap-4"},V=["value"],D={class:"flex space-x-2"},U=["value"],B={class:"flex justify-between items-center bg-gray-100 p-2 rounded-md shadow-md"},C={class:"w-7/12"},M={class:"w-2/12"},T={class:"w-3/12"},A=["onClick"],q={class:"grid grid-cols-3 gap-4"},j={class:"grid grid-cols-2 gap-4 mt-4"},E={class:"flex justify-center mt-10 space-x-4"};function N(a,e,g,m,o,n){const w=v("SideBar");return i(),d(p,null,[t("div",P,[h(w),t("div",O,[e[33]||(e[33]=t("div",{class:"flex justify-center items-center mb-6"},[t("h2",{class:"text-3xl font-bold text-[#6d1b23]"},"Form Penyewaan")],-1)),t("div",L,[t("div",I,[t("div",null,[e[17]||(e[17]=t("label",{class:"block font-bold"},"Nama:",-1)),s(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>o.form.nama=l),placeholder:"Masukkan nama",class:"border border-black w-full p-2 rounded-md"},null,512),[[r,o.form.nama]]),e[18]||(e[18]=t("label",{class:"block font-bold mt-2"},"Alamat:",-1)),s(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>o.form.alamat=l),placeholder:"Masukkan alamat",class:"border border-black w-full p-2 rounded-md"},null,512),[[r,o.form.alamat]]),e[19]||(e[19]=t("label",{class:"block font-bold mt-2"},"No. Telp:",-1)),s(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>o.form.noTelp=l),placeholder:"Masukkan nomor telepon",class:"border border-black w-full p-2 rounded-md"},null,512),[[r,o.form.noTelp]]),e[20]||(e[20]=t("label",{class:"block font-bold mt-2"},"Email:",-1)),s(t("input",{type:"email","onUpdate:modelValue":e[3]||(e[3]=l=>o.form.email=l),placeholder:"Masukkan email",class:"border border-black w-full p-2 rounded-md"},null,512),[[r,o.form.email]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block font-bold"},"Pilih Paket:",-1)),s(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.form.paket=l),class:"border border-black w-full p-2 rounded-md"},[e[21]||(e[21]=t("option",{selected:"",value:""},"Pilih Paket",-1)),(i(!0),d(p,null,k(o.packages,l=>(i(),d("option",{value:l},f(l.name),9,V))),256))],512),[[u,o.form.paket]]),e[24]||(e[24]=t("label",{class:"block font-bold mt-2"},"Pilih Add-on:",-1)),t("div",D,[s(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.addOnSelection=l),class:"border border-black w-2/5 p-2 rounded-md"},[e[22]||(e[22]=t("option",{selected:"",value:{}},"Pilih Add-On",-1)),(i(!0),d(p,null,k(o.items,l=>(i(),d("option",{value:l},f(l.name),9,U))),256))],512),[[u,o.addOnSelection]]),s(t("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=l=>o.addOnSelection.qty=l),min:"1",default:"1",class:"border border-black w-1/4 p-2 rounded-md",placeholder:"Qty"},null,512),[[r,o.addOnSelection.qty]]),t("button",{onClick:e[7]||(e[7]=(...l)=>n.addItem&&n.addItem(...l)),class:"bg-green-500 text-white px-4 py-2 rounded-md"},"Add")]),(i(!0),d(p,null,k(o.orderList,(l,c)=>(i(),d("div",{key:"item"+c,class:"mt-2"},[t("div",B,[t("div",C,f(l.name),1),t("div",M,"X "+f(l.qty),1),t("div",T,[t("button",{onClick:F=>n.removeItem(c),class:"bg-[#6d1b23] text-white p-1 rounded-md w-full"},"Remove",8,A)])])]))),128))])]),e[32]||(e[32]=t("hr",{class:"my-4 border-gray-300"},null,-1)),t("div",q,[t("div",null,[e[25]||(e[25]=t("label",{class:"block font-bold"},"Tanggal Sewa:",-1)),s(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=l=>o.form.tanggalSewa=l),class:"border border-black w-full p-2 rounded-md",onChange:e[9]||(e[9]=(...l)=>n.hitungLamaSewa&&n.hitungLamaSewa(...l))},null,544),[[r,o.form.tanggalSewa]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block font-bold"},"Tanggal Pengembalian:",-1)),s(t("input",{type:"date","onUpdate:modelValue":e[10]||(e[10]=l=>o.form.tanggalPengembalian=l),class:"border border-black w-full p-2 rounded-md",onChange:e[11]||(e[11]=(...l)=>n.hitungLamaSewa&&n.hitungLamaSewa(...l))},null,544),[[r,o.form.tanggalPengembalian]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block font-bold"},"Lama Penyewaan (Hari):",-1)),s(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=l=>o.form.lamaSewa=l),class:"border border-black w-full p-2 rounded-md",readonly:""},null,512),[[r,o.form.lamaSewa]])])]),t("div",j,[t("div",null,[e[29]||(e[29]=t("label",{class:"block font-bold"},"Metode Pembayaran:",-1)),s(t("select",{"onUpdate:modelValue":e[13]||(e[13]=l=>o.form.metodePembayaran=l),class:"border border-black w-full p-2 rounded-md"},e[28]||(e[28]=[t("option",null,"Cash",-1),t("option",null,"Transfer",-1)]),512),[[u,o.form.metodePembayaran]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block font-bold"},"Status Pembayaran:",-1)),s(t("select",{"onUpdate:modelValue":e[14]||(e[14]=l=>o.form.statusPembayaran=l),class:"border border-black w-full p-2 rounded-md"},e[30]||(e[30]=[t("option",null,"Lunas",-1),t("option",null,"DP 50%",-1)]),512),[[u,o.form.statusPembayaran]])])]),t("div",E,[t("button",{onClick:e[15]||(e[15]=(...l)=>n.Back&&n.Back(...l)),class:"bg-[#6d1b23] text-white px-6 py-2 rounded-md"},"Back"),t("button",{onClick:e[16]||(e[16]=(...l)=>n.Order&&n.Order(...l)),class:"bg-[#6d1b23] text-white px-6 py-2 rounded-md"},"Order")])])])]),e[34]||(e[34]=t("footer",{class:"text-center py-3 bg-[#6d1b23] text-white w-full bottom-0 z-10"}," Â© All Rights Reserved. ",-1))],64)}const z=y(x,[["render",N]]);export{z as default};
