import{_ as w,S as f,M as D,c as d,a as t,e as _,r as y,w as b,f as p,F as g,g as m,h as v,d as k,o,t as l}from"./index-CN63sUZO.js";import{u as h,w as B}from"./xlsx-D1NZSDnX.js";const E={components:{ModalWindow:D,SideBar:f},name:"DashboardEST",data(){return{selectedMonth:"",selectedYear:"",months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],years:[2025,2024,2023,2022,2021],paket:[],barang:[],allData:[]}},methods:{changeDate(){this.fetchData()},goTo(a){this.$route.path!==a&&this.$router.push(a)},openModal(a){this.modalType=a,this.showModal=!0},logout(){localStorage.removeItem("token"),this.$router.push("/login")},async fetchData(){const a=await k.get("http://localhost:40001/expenses",{params:{month:this.selectedMonth,year:this.selectedYear}});this.allData=a.data;const e=a.data.filter(r=>r.type==="Package"),c=a.data.filter(r=>r.type==="Item");this.paket=e,this.barang=c},formatDate(a){return new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})},downloadFile(){const a=this.allData.map((r,n)=>({No:n+1,"Tanggal Transaksi":this.formatDate(r.createdAt),"Tipe Transaksi":r.transaction_type,Nominal:r.total,"Nama Pemesan":r.name,Keterangan:r.description})),e=h.json_to_sheet(a),c=h.book_new();h.book_append_sheet(c,e,"Laporan Pengeluaran"),B(c,`laporan_pengeluaran_${this.selectedYear}_${this.selectedMonth}.xlsx`)}},created(){localStorage.getItem("token")===null&&this.$router.push("/login");const a=new Date().toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}).split(" ");console.log(a),this.selectedMonth=this.months.indexOf(a[1])+1,this.selectedYear=a[2],this.fetchData()}},N={class:"min-h-screen flex bg-gray-50"},S={class:"flex flex-col items-center p-5 bg-gray-100 w-full"},M={class:"flex justify-center gap-4 mb-6"},P=["value"],L=["value"],j={class:"w-full mb-5 rounded-t-lg shadow-md shadow-gray-700 bg-none"},F={key:0},A={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-1/12"},T={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-2/12"},Y={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},I={class:"p-2 bg-[##E5E7EB] text-xs md:text-lg w-2/12"},V={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},C={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-1/12"},H={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},J={key:1},K={class:"w-full rounded-t-lg shadow-md shadow-gray-700 bg-none mb-12"},q={key:0},O={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-1/12"},Q={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-2/12"},R={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},U={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-2/12"},z={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},W={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-1/12"},G={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},X={key:1},Z={class:"flex justify-center mt-6"};function $(a,e,c,r,n,x){const u=y("SideBar");return o(),d(g,null,[t("div",N,[_(u),t("div",S,[e[9]||(e[9]=t("div",{class:"flex justify-center items-center mb-6"},[t("h2",{class:"text-3xl font-bold text-[#6d1b23]"},"Laporan Pengeluaran")],-1)),t("div",M,[b(t("select",{onChange:e[0]||(e[0]=(...s)=>x.changeDate&&x.changeDate(...s)),"onUpdate:modelValue":e[1]||(e[1]=s=>n.selectedMonth=s),class:"p-3 border border-[#6d1b23] rounded-lg shadow-sm bg-white text-black-800 font-bold"},[(o(!0),d(g,null,m(n.months,(s,i)=>(o(),d("option",{key:i,value:i+1},l(s),9,P))),128))],544),[[p,n.selectedMonth]]),b(t("select",{onChange:e[2]||(e[2]=(...s)=>x.changeDate&&x.changeDate(...s)),"onUpdate:modelValue":e[3]||(e[3]=s=>n.selectedYear=s),class:"p-3 border border-[#6d1b23] rounded-lg shadow-sm bg-white text-black-800 font-bold"},[(o(!0),d(g,null,m(n.years,s=>(o(),d("option",{key:s,value:s},l(s),9,L))),128))],544),[[p,n.selectedYear]])]),e[10]||(e[10]=t("div",{class:"flex justify-between items-center mt-4"},[t("h2",{class:"text-2xl font-bold mb-3"},"List Paket")],-1)),t("div",j,[e[6]||(e[6]=v('<div class="rounded-t-lg"><div class="bg-[#6d1b23] text-white flex text-left md:text-center rounded-t-lg"><div class="p-2 text-xs md:text-lg w-1/12">No.</div><div class="p-2 text-xs md:text-lg w-2/12">Nama Pemesan</div><div class="p-2 text-xs md:text-lg w-2/12">No. HP</div><div class="p-2 text-xs md:text-lg w-2/12">Nama Barang</div><div class="p-2 text-xs md:text-lg w-2/12">Keterangan</div><div class="p-2 text-xs md:text-lg w-1/12">Qty</div><div class="p-2 text-xs md:text-lg w-2/12">Harga</div></div></div>',1)),n.paket.length?(o(),d("div",F,[(o(!0),d(g,null,m(n.paket,(s,i)=>(o(),d("div",{class:"text-left md:text-center flex border-b-1 border-gray-400",key:s.nama+i},[t("div",A,l(i+1),1),t("div",T,l(s.name),1),t("div",Y,l(s.phone),1),t("div",I,l(s.itemList),1),t("div",V,l(s.description),1),t("div",C,l(s.qty),1),t("div",H,l(s.total),1)]))),128))])):(o(),d("div",J,e[5]||(e[5]=[t("div",{class:"text-left md:text-center flex items-center justify-center border-b-1 border-gray-400 h-24"}," No Data Available ",-1)])))]),e[11]||(e[11]=t("div",{class:"flex justify-between items-center mt-4 md:mt-12"},[t("h2",{class:"text-2xl font-bold mb-3"},"List Barang")],-1)),t("div",K,[e[8]||(e[8]=v('<div class="rounded-t-lg"><div class="bg-[#6d1b23] text-white flex text-left md:text-center rounded-t-lg"><div class="p-2 text-xs md:text-lg w-1/12">No.</div><div class="p-2 text-xs md:text-lg w-2/12">Nama Pemesan</div><div class="p-2 text-xs md:text-lg w-2/12">No. HP</div><div class="p-2 text-xs md:text-lg w-2/12">Nama Barang</div><div class="p-2 text-xs md:text-lg w-2/12">Keterangan</div><div class="p-2 text-xs md:text-lg w-1/12">Qty</div><div class="p-2 text-xs md:text-lg w-2/12">Harga</div></div></div>',1)),n.barang.length?(o(),d("div",q,[(o(!0),d(g,null,m(n.barang,(s,i)=>(o(),d("div",{class:"text-left md:text-center flex border-b-1 border-gray-400",key:s.nama+i},[t("div",O,l(i+1),1),t("div",Q,l(s.name),1),t("div",R,l(s.phone),1),t("div",U,l(s.itemList),1),t("div",z,l(s.description),1),t("div",W,l(s.qty),1),t("div",G,l(s.total),1)]))),128))])):(o(),d("div",X,e[7]||(e[7]=[t("div",{class:"text-left md:text-center flex items-center justify-center border-b-1 border-gray-400 h-24"}," No Data Available ",-1)])))]),t("div",Z,[t("button",{onClick:e[4]||(e[4]=(...s)=>x.downloadFile&&x.downloadFile(...s)),class:"px-4 py-2 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700"}," Download File ")])])]),e[12]||(e[12]=t("footer",{class:"text-center py-3 bg-[#6d1b23] text-white w-full bottom-0 z-10"}," Â© All Rights Reserved. ",-1))],64)}const st=w(E,[["render",$]]);export{st as default};
