import{_ as w,S as f,M as D,c as d,a as t,e as _,r as y,w as h,f as v,F as g,g as m,h as p,d as k,o,t as a}from"./index-jWITr_ym.js";import{u as b,w as B}from"./xlsx-D1NZSDnX.js";const E={components:{ModalWindow:D,SideBar:f},name:"DashboardEST",data(){return{selectedMonth:"",selectedYear:"",months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],years:[2025,2024,2023,2022,2021],paket:[],barang:[],allData:[]}},methods:{changeDate(){this.fetchData()},goTo(l){this.$route.path!==l&&this.$router.push(l)},openModal(l){this.modalType=l,this.showModal=!0},logout(){localStorage.removeItem("token"),this.$router.push("/login")},async fetchData(){const l=await k.get("http://localhost:40001/income",{params:{month:this.selectedMonth,year:this.selectedYear}});this.allData=l.data;const s=l.data.filter(i=>i.type==="Package"),c=l.data.filter(i=>i.type==="Item");this.paket=s,this.barang=c},downloadExcel(){const l=this.allData.map((i,n)=>({No:n+1,"Tanggal Transaksi":this.formatDate(i.createdAt),"Tipe Transaksi":i.transaction_type,Nominal:i.total,"Nama Pemesan":i.name,Keterangan:i.description})),s=b.json_to_sheet(l),c=b.book_new();b.book_append_sheet(c,s,"Laporan Pemasukan"),B(c,`laporan_pemasukan_${this.selectedYear}_${this.selectedMonth}.xlsx`)}},created(){localStorage.getItem("token")===null&&this.$router.push("/login");const l=new Date().toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}).split(" ");console.log(l),this.selectedMonth=this.months.indexOf(l[1])+1,this.selectedYear=l[2],this.fetchData()}},N={class:"min-h-screen flex bg-gray-50"},M={class:"flex flex-col items-center p-5 bg-gray-100 w-full"},S={class:"flex justify-center gap-4 mb-6"},P=["value"],L=["value"],j={class:"w-full mb-5 rounded-t-lg shadow-md shadow-gray-700 bg-none"},A={key:0},T={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-1/12"},Y={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-2/12"},F={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},V={class:"p-2 bg-[##E5E7EB] text-xs md:text-lg w-2/12"},C={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},H={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-1/12"},I={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},J={key:1},K={class:"w-full rounded-t-lg shadow-md shadow-gray-700 bg-none mb-12"},q={key:0},O={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-1/12"},Q={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-2/12"},R={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},U={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-2/12"},z={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},W={class:"p-2 bg-[#E5E7EB] text-xs md:text-lg w-1/12"},G={class:"p-2 bg-[#D1D5DB] text-xs md:text-lg w-2/12"},X={key:1},Z={class:"flex justify-center mt-6"};function $(l,s,c,i,n,x){const u=y("SideBar");return o(),d(g,null,[t("div",N,[_(u),t("div",M,[s[9]||(s[9]=t("div",{class:"flex justify-center items-center mb-6"},[t("h2",{class:"text-3xl font-bold text-[#6d1b23]"},"Laporan Pemasukan")],-1)),t("div",S,[h(t("select",{onChange:s[0]||(s[0]=(...e)=>x.changeDate&&x.changeDate(...e)),"onUpdate:modelValue":s[1]||(s[1]=e=>n.selectedMonth=e),class:"p-3 border border-[#6d1b23] rounded-lg shadow-sm bg-white text-black-800 font-bold"},[(o(!0),d(g,null,m(n.months,(e,r)=>(o(),d("option",{key:r,value:r+1},a(e),9,P))),128))],544),[[v,n.selectedMonth]]),h(t("select",{onChange:s[2]||(s[2]=(...e)=>x.changeDate&&x.changeDate(...e)),"onUpdate:modelValue":s[3]||(s[3]=e=>n.selectedYear=e),class:"p-3 border border-[#6d1b23] rounded-lg shadow-sm bg-white text-black-800 font-bold"},[(o(!0),d(g,null,m(n.years,e=>(o(),d("option",{key:e,value:e},a(e),9,L))),128))],544),[[v,n.selectedYear]])]),s[10]||(s[10]=t("div",{class:"flex justify-between items-center mt-4"},[t("h2",{class:"text-2xl font-bold mb-3"},"List Paket")],-1)),t("div",j,[s[6]||(s[6]=p('<div class="rounded-t-lg"><div class="bg-[#6d1b23] text-white flex text-left md:text-center rounded-t-lg"><div class="p-2 text-xs md:text-lg w-1/12">No.</div><div class="p-2 text-xs md:text-lg w-2/12">Nama Pemesan</div><div class="p-2 text-xs md:text-lg w-2/12">No. HP</div><div class="p-2 text-xs md:text-lg w-2/12">Nama Barang</div><div class="p-2 text-xs md:text-lg w-2/12">Keterangan</div><div class="p-2 text-xs md:text-lg w-1/12">Qty</div><div class="p-2 text-xs md:text-lg w-2/12">Harga</div></div></div>',1)),n.paket.length?(o(),d("div",A,[(o(!0),d(g,null,m(n.paket,(e,r)=>(o(),d("div",{class:"text-left md:text-center flex border-b-1 border-gray-400",key:e.nama+r},[t("div",T,a(r+1),1),t("div",Y,a(e.name),1),t("div",F,a(e.phone),1),t("div",V,a(e.itemList),1),t("div",C,a(e.description),1),t("div",H,a(e.qty),1),t("div",I,a(e.total),1)]))),128))])):(o(),d("div",J,s[5]||(s[5]=[t("div",{class:"text-left md:text-center flex items-center justify-center border-b-1 border-gray-400 h-24"}," No Data Available ",-1)])))]),s[11]||(s[11]=t("div",{class:"flex justify-between items-center mt-4 md:mt-12"},[t("h2",{class:"text-2xl font-bold mb-3"},"List Barang")],-1)),t("div",K,[s[8]||(s[8]=p('<div class="rounded-t-lg"><div class="bg-[#6d1b23] text-white flex text-left md:text-center rounded-t-lg"><div class="p-2 text-xs md:text-lg w-1/12">No.</div><div class="p-2 text-xs md:text-lg w-2/12">Nama Pemesan</div><div class="p-2 text-xs md:text-lg w-2/12">No. HP</div><div class="p-2 text-xs md:text-lg w-2/12">Nama Barang</div><div class="p-2 text-xs md:text-lg w-2/12">Keterangan</div><div class="p-2 text-xs md:text-lg w-1/12">Qty</div><div class="p-2 text-xs md:text-lg w-2/12">Harga</div></div></div>',1)),n.barang.length?(o(),d("div",q,[(o(!0),d(g,null,m(n.barang,(e,r)=>(o(),d("div",{class:"text-left md:text-center flex border-b-1 border-gray-400",key:e.nama+r},[t("div",O,a(r+1),1),t("div",Q,a(e.name),1),t("div",R,a(e.phone),1),t("div",U,a(e.itemList),1),t("div",z,a(e.description),1),t("div",W,a(e.qty),1),t("div",G,a(e.total),1)]))),128))])):(o(),d("div",X,s[7]||(s[7]=[t("div",{class:"text-left md:text-center flex items-center justify-center border-b-1 border-gray-400 h-24"}," No Data Available ",-1)])))]),t("div",Z,[t("button",{onClick:s[4]||(s[4]=(...e)=>x.downloadExcel&&x.downloadExcel(...e)),class:"px-4 py-2 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700"}," Download File ")])])]),s[12]||(s[12]=t("footer",{class:"text-center py-3 bg-[#6d1b23] text-white w-full bottom-0 z-10"}," Â© All Rights Reserved. ",-1))],64)}const st=w(E,[["render",$]]);export{st as default};
